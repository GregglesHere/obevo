<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2017-05-15 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Obevo &#x2013; Permission Management</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                                              <a href="./" id="bannerLeft">
                Obevo
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
                <div class="xleft">
        <span id="publishDate">Last Published: 2017-05-15</span>
                  &nbsp;| <span id="projectVersion">Version: 6.0.1</span>
                      </div>
            <div class="xright">                    <a href=".." title="Product Link">Product Link</a>
            
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
                                <h5>Getting Started</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Intro">Intro</a>
            </li>
                  <li class="none">
                          <a href="overview.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="setup.html" title="Setup your Distribution">Setup your Distribution</a>
            </li>
                  <li class="none">
                          <a href="support.html" title="Help and Support">Help and Support</a>
            </li>
          </ul>
                       <h5>Technical Documentation</h5>
                  <ul>
                  <li class="none">
                          <a href="db-project-structure.html" title="DB Project Structure">DB Project Structure</a>
            </li>
                  <li class="none">
                          <a href="environment-management.html" title="Environment Management">Environment Management</a>
            </li>
                  <li class="none">
            <strong>Permission Management</strong>
          </li>
                  <li class="none">
                          <a href="error-handling.html" title="Error-Handling">Error-Handling</a>
            </li>
                  <li class="none">
                          <a href="command-line-api.html" title="Command-line API">Command-line API</a>
            </li>
                  <li class="none">
                          <a href="java-api.html" title="Java API">Java API</a>
            </li>
                  <li class="none">
                          <a href="maven-api.html" title="Maven plugin API">Maven plugin API</a>
            </li>
                  <li class="none">
                          <a href="gradle-api.html" title="Gradle API">Gradle API</a>
            </li>
                  <li class="none">
                          <a href="faq.html" title="FAQs">FAQs</a>
            </li>
          </ul>
                       <h5>Advanced Topics</h5>
                  <ul>
                  <li class="none">
                          <a href="db-project-best-practices.html" title="DB Project Best Practices">DB Project Best Practices</a>
            </li>
                  <li class="none">
                          <a href="rollback.html" title="Rollback">Rollback</a>
            </li>
                  <li class="none">
                          <a href="multiple-schema-management.html" title="Multiple Schema Management">Multiple Schema Management</a>
            </li>
                  <li class="none">
                          <a href="in-memory-db-testing.html" title="In-memory DB Testing">In-memory DB Testing</a>
            </li>
                  <li class="none">
                          <a href="parallel-deploy-execution.html" title="Parallel Deploy Execution">Parallel Deploy Execution</a>
            </li>
                  <li class="none">
                          <a href="orm-integration.html" title="ORM Integration">ORM Integration</a>
            </li>
                  <li class="none">
                          <a href="baseline-validation.html" title="Baseline DDL Validation">Baseline DDL Validation</a>
            </li>
                  <li class="none">
                          <a href="sybase-ase-notes.html" title="Sybase ASE Notes">Sybase ASE Notes</a>
            </li>
                  <li class="none">
                          <a href="db2-notes.html" title="DB2 Notes">DB2 Notes</a>
            </li>
                  <li class="none">
                          <a href="phased-deployments.html" title="Phased Deployments">Phased Deployments</a>
            </li>
                  <li class="none">
                          <a href="incremental-change-code-cleanup.html" title="Incremental Change Code Cleanup">Incremental Change Code Cleanup</a>
            </li>
          </ul>
                       <h5>Onboarding Guide</h5>
                  <ul>
                  <li class="none">
                          <a href="onboarding-guide.html" title="Which onboarding to choose?">Which onboarding to choose?</a>
            </li>
                  <li class="none">
                          <a href="new-onboarding-guide.html" title="New Systems">New Systems</a>
            </li>
                  <li class="none">
                          <a href="existing-onboarding-guide.html" title="Existing Systems">Existing Systems</a>
            </li>
                  <li class="none">
                          <a href="existing-diverging-onboarding-guide.html" title="Existing Systems with Diverging Shards">Existing Systems with Diverging Shards</a>
            </li>
                  <li class="none">
                          <a href="legacy-onboarding-guide.html" title="Legacy Onboarding - Legacy Systems">Legacy Onboarding - Legacy Systems</a>
            </li>
                  <li class="none">
                          <a href="db-merge-tool.html" title="DB Merge Tool">DB Merge Tool</a>
            </li>
          </ul>
                       <h5>Developer Information</h5>
                  <ul>
                  <li class="none">
                          <a href="developer-guide.html" title="Developer Guide">Developer Guide</a>
            </li>
                  <li class="none">
                          <a href="design-walkthrough.html" title="Design Walkthrough">Design Walkthrough</a>
            </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                 
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        
    
        
            
            
        <ul>
<li><a href="#Permission_Schemes_in_system-config.xml">Permission Schemes in system-config.xml</a></li>
<li><a href="#Grant_Execution_Behavior">Grant Execution Behavior</a></li></ul>
        
<p>This page will describe the special functionalities for managing grants in your database.</p>
        
<div class="section">
<h2><a name="Permission_Schemes_in_system-config.xml"></a>Permission Schemes in system-config.xml</h2>
            You can specify general permissions to use for all your objects using the &lt;permissions&gt; element in
            system-config.xml. See this example:
            
<div class="source">
<pre>&lt;dbSystemConfig&gt;
    &lt;schemas&gt;
        ...
    &lt;/schemas&gt;
    &lt;environments&gt;
        ...
    &lt;/environments&gt;
    &lt;permissions&gt;
        &lt;permission scheme=&quot;TABLE&quot;&gt;  &lt;!-- scheme name corresponding to object type &quot;table&quot; --&gt;
            &lt;grant groups=&quot;RO_GROUP1,RO_GROUP2&quot; privileges=&quot;SELECT&quot; /&gt;
            &lt;grant groups=&quot;RW_GROUP&quot; privileges=&quot;UPDATE,SELECT&quot; /&gt;
            &lt;grant users=&quot;SUPERUSER&quot; privileges=&quot;INSERT,SELECT,UPDATE,DELETE&quot; /&gt;
        &lt;/permission&gt;
        &lt;permission scheme=&quot;TABLE_RO&quot;&gt;  &lt;!-- custom scheme name that objects can opt into --&gt;
            &lt;grant groups=&quot;RO_GROUP3,RO_GROUP4&quot; privileges=&quot;SELECT&quot; /&gt;
        &lt;/permission&gt;
        &lt;permission scheme=&quot;VIEW&quot;&gt;  &lt;!-- scheme name corresponding to object type &quot;view&quot; --&gt;
            &lt;grant users=&quot;SUPERUSER&quot; groups=&quot;RO_GROUP1,RO_GROUP2,RW_GROUP&quot; privileges=&quot;SELECT&quot; /&gt;
        &lt;/permission&gt;
        &lt;permission scheme=&quot;SP&quot;&gt;  &lt;!-- scheme name corresponding to object type &quot;sp&quot; --&gt;
            &lt;grant groups=&quot;RO_GROUP1,RO_GROUP2,RW_GROUP&quot; privileges=&quot;EXECUTE&quot; /&gt;
        &lt;/permission&gt;
    &lt;/permissions&gt;
&lt;/dbSystemConfig&gt;</pre></div>

            What we have:
            
<ul>
                
<li>&lt;permission&gt; defines a particular scheme
                    
<ul>
                        
<li>Each DB object will have a particular scheme</li>
                        
<li>By default, the scheme name will be the object type, e.g. TABLE, SP, VIEW, SEQUENCE,
                            FUNCTION
                        </li>
                        
<li>But we can override using a metadata annotation, e.g. //// METADATA permissionScheme=&quot;TABLE_RO&quot;
                        </li>
                    </ul>
                </li>
                
<li>Then specify a &lt;grant&gt; entry for each kind of user/group and privilege combo that you want
                    to add.
                </li>
            </ul>

            So the above will translate to:
            
<div class="source">
<pre>// for TableA on its default permission scheme TABLE
GRANT SELECT ON TableA TO GROUP RO_GROUP1
GRANT SELECT ON TableA TO GROUP RO_GROUP2
GRANT UPDATE, SELECT ON TableA TO GROUP RW_GROUP
GRANT INSERT, SELECT, UPDATE, DELETE ON TableA TO USER SUPERUSER

// for TableB that declares //// METADATA permissionScheme=&quot;TABLE_RO&quot; in its file
GRANT SELECT ON TableA TO GROUP RO_GROUP3
GRANT SELECT ON TableA TO GROUP RO_GROUP4

// for ViewA on its default permission scheme VIEW
GRANT SELECT ON ViewA TO USER SUPERUSER
GRANT SELECT ON ViewA TO GROUP RO_GROUP1
GRANT SELECT ON ViewA TO GROUP RO_GROUP2
GRANT SELECT ON ViewA TO GROUP RW_GROUP
</pre></div>

            Note that:
            
<ul>
                
<li>The values here can be tokenized (i.e. if you specify the tokens in system-config.xml, they can
                    be replaced here as well
                </li>
            </ul>
        </div>
        
<div class="section">
<h2><a name="Grant_Execution_Behavior"></a>Grant Execution Behavior</h2>
            
<p>As of today, these grants are only applied when an object is created, i.e.
                </p>
<ul>
                    
<li>When a table is initially created. This is detected either by the tool finding &quot;CREATE TABLE&quot;
                        in the SQL or by defining a
                        <u>
                            </u><b><u>//// CHANGE applyGrants=true</u></b><u>
                        </u>
                        annotation on the change in question
                    </li>
                    
<li>When a rerunnable object is created/recreated</li>
                </ul>
            

            
<p>Note that if you change the &lt;permissions&gt; element itself, the tool will not automatically apply
                that grant on existing objects; it would only apply on newly created or modified objects going forward.
            </p>

            
<p>(having &lt;permissions&gt; changes applied on existing objects will be a future enhancement (see GITHUB#3))</p>
        </div>
    

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2017
                        <a href="http://www.goldmansachs.com/">Goldman Sachs</a>.
            All rights reserved.    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
