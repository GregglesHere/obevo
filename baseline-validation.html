<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2017-06-18 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Obevo &#x2013; Baseline Validation</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                                              <a href="./" id="bannerLeft">
                Obevo
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
                <div class="xleft">
        <span id="publishDate">Last Published: 2017-06-18</span>
                  &nbsp;| <span id="projectVersion">Version: 6.1.0</span>
                      </div>
            <div class="xright">                    <a href=".." title="Product Link">Product Link</a>
            
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
                                <h5>Getting Started</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Intro">Intro</a>
            </li>
                  <li class="none">
                          <a href="overview.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="setup.html" title="Setup your Distribution">Setup your Distribution</a>
            </li>
                  <li class="none">
                          <a href="support.html" title="Help and Support">Help and Support</a>
            </li>
          </ul>
                       <h5>Technical Documentation</h5>
                  <ul>
                  <li class="none">
                          <a href="db-project-structure.html" title="DB Project Structure">DB Project Structure</a>
            </li>
                  <li class="none">
                          <a href="environment-management.html" title="Environment Management">Environment Management</a>
            </li>
                  <li class="none">
                          <a href="permission-management.html" title="Permission Management">Permission Management</a>
            </li>
                  <li class="none">
                          <a href="error-handling.html" title="Error-Handling">Error-Handling</a>
            </li>
                  <li class="none">
                          <a href="command-line-api.html" title="Command-line API">Command-line API</a>
            </li>
                  <li class="none">
                          <a href="java-api.html" title="Java API">Java API</a>
            </li>
                  <li class="none">
                          <a href="maven-api.html" title="Maven plugin API">Maven plugin API</a>
            </li>
                  <li class="none">
                          <a href="gradle-api.html" title="Gradle API">Gradle API</a>
            </li>
                  <li class="none">
                          <a href="faq.html" title="FAQs">FAQs</a>
            </li>
          </ul>
                       <h5>Advanced Topics</h5>
                  <ul>
                  <li class="none">
                          <a href="db-project-best-practices.html" title="DB Project Best Practices">DB Project Best Practices</a>
            </li>
                  <li class="none">
                          <a href="rollback.html" title="Rollback">Rollback</a>
            </li>
                  <li class="none">
                          <a href="multiple-schema-management.html" title="Multiple Schema Management">Multiple Schema Management</a>
            </li>
                  <li class="none">
                          <a href="in-memory-db-testing.html" title="In-memory DB Testing">In-memory DB Testing</a>
            </li>
                  <li class="none">
                          <a href="parallel-deploy-execution.html" title="Parallel Deploy Execution">Parallel Deploy Execution</a>
            </li>
                  <li class="none">
                          <a href="orm-integration.html" title="ORM Integration">ORM Integration</a>
            </li>
                  <li class="none">
            <strong>Baseline DDL Validation</strong>
          </li>
                  <li class="none">
                          <a href="sybase-ase-notes.html" title="Sybase ASE Notes">Sybase ASE Notes</a>
            </li>
                  <li class="none">
                          <a href="db2-notes.html" title="DB2 Notes">DB2 Notes</a>
            </li>
                  <li class="none">
                          <a href="phased-deployments.html" title="Phased Deployments">Phased Deployments</a>
            </li>
                  <li class="none">
                          <a href="incremental-change-code-cleanup.html" title="Incremental Change Code Cleanup">Incremental Change Code Cleanup</a>
            </li>
          </ul>
                       <h5>Onboarding Guide</h5>
                  <ul>
                  <li class="none">
                          <a href="onboarding-guide.html" title="Which onboarding to choose?">Which onboarding to choose?</a>
            </li>
                  <li class="none">
                          <a href="new-onboarding-guide.html" title="New Systems">New Systems</a>
            </li>
                  <li class="none">
                          <a href="existing-onboarding-guide.html" title="Existing Systems">Existing Systems</a>
            </li>
                  <li class="none">
                          <a href="existing-diverging-onboarding-guide.html" title="Existing Systems with Diverging Shards">Existing Systems with Diverging Shards</a>
            </li>
                  <li class="none">
                          <a href="legacy-onboarding-guide.html" title="Legacy Onboarding - Legacy Systems">Legacy Onboarding - Legacy Systems</a>
            </li>
                  <li class="none">
                          <a href="db-merge-tool.html" title="DB Merge Tool">DB Merge Tool</a>
            </li>
          </ul>
                       <h5>Developer Information</h5>
                  <ul>
                  <li class="none">
                          <a href="developer-guide.html" title="Developer Guide">Developer Guide</a>
            </li>
                  <li class="none">
                          <a href="design-walkthrough.html" title="Design Walkthrough">Design Walkthrough</a>
            </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                 
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        
    
        
            
            
        <ul>
<li><a href="#Using_the_baseline_comparison_feature_to_validate_that_your_CHANGEs_match_your_baseline">Using the baseline comparison feature to validate that your CHANGEs match your baseline</a></li></ul>
        
<div class="section">
<h2><a name="Using_the_baseline_comparison_feature_to_validate_that_your_CHANGEs_match_your_baseline"></a>Using the baseline comparison feature to validate that your CHANGEs match your baseline</h2>
            
<p>If you provide a file w/ ends with .baseline.&lt;extension&gt;, this counts as the baseline file.
                This is only used when you run Obevo in validateBaseline mode.
                the maven plugin in validateBaseline mode (see the pom example below)
            </p>
            
<p>Two ways to run this:</p>
            
<div class="section">
<h3><a name="a1_Java_Code"></a>1) Java Code</h3>
                BaselineValidatorMain
                com.gs.obevo.db.apps.baselineutil.BaselineValidatorMain class
                ? calculateBaselineBreaks will return a list of breaks
                ? validateNoBaselineBreaks is a convenience method to fail if breaks exist
            </div>
            
<div class="section">
<h3><a name="a2_Maven_plugin"></a>2) Maven plugin</h3>
                
<div class="source">
<pre>&lt;plugin&gt;
    &lt;groupId&gt;com.goldmansachs.obevo&lt;/groupId&gt;
    &lt;artifactId&gt;obevo-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;${obevo.version}&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;test-db-module&lt;/id&gt;
            &lt;goals&gt;
                &lt;goal&gt;test&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
                &lt;env&gt;test&lt;/env&gt;
                &lt;user&gt;sa&lt;/user&gt;
                &lt;password&gt;deploypass&lt;/password&gt;
                &lt;sourcePath&gt;${basedir}/src/main/database&lt;/sourcePath&gt;
                &lt;validateBaseline&gt;true&lt;/validateBaseline&gt;
            &lt;/configuration&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;</pre></div>
            </div>
            
<div class="section">
<h2><a name="How_it_works:"></a>How it works:</h2>
            
<ul>
                
<li>First runs a -cleanFirst deployment against your environment using your regular files (i.e. w/
                    the
                    CHANGEs)
                    
<ul>
                        
<li>And queries the table metadata and stores in memory, as to remember what was deployed.
                        </li>
                    </ul>
                </li>
                
<li>Then does another -cleanFirst deployment, this time using the .baseline. files where it finds
                    them in
                    place of the regular table files. (if a table file does not have a corresponding baseline file,
                    it just
                    runs the original baseline file)
                    
<ul>
                        
<li>And queries the table metadata and stores in memory, as to remember what was deployed
                            this
                            time
                        </li>
                    </ul>
                </li>
                
<li>Then does a comparison of the metadata objects for the tables. If there is a break, then it
                    fails
                </li>
            </ul>
            
<p>You can leverage this at build time to ensure that {+}{+}<i>if you change your Hibernate/Reladomo/Java
                model
                files, that it will stay in sync with the changes you deploy to your DB</i>. Nice benefit, huh?
            </p>
            
<p>(yes, it would be nice if the tool went a step further and figured out the alter commands for you and
                you
                never saw them. That is the holy grail...)
            </p>
            </div>
        </div>
    

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2017
                        <a href="http://www.goldmansachs.com/">Goldman Sachs</a>.
            All rights reserved.    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
