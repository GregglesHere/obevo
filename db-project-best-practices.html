<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2017-11-15 
 | Rendered using Apache Maven Fluido Skin 1.6
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20171115" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Obevo &#x2013; DB Project Best Practices</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.6.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
      <script type="text/javascript" src="./js/apache-maven-fluido-1.6.min.js"></script>
      </head>
    <body class="topBarEnabled">
                      <a href="https://github.com/goldmansachs/obevo">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
        alt="Fork me on GitHub">
    </a>
      <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
        <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
            <ul class="nav">
        <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Getting Started <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="index.html" title="Intro">Intro</a></li>
            <li><a href="overview.html" title="Overview">Overview</a></li>
            <li><a href="setup.html" title="Setup">Setup</a></li>
            <li><a href="support.html" title="Help and Support">Help and Support</a></li>
        </ul>
      </li>
        <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Technical Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="db-project-structure.html" title="DB Project Structure">DB Project Structure</a></li>
            <li><a href="environment-management.html" title="Environment Management">Environment Management</a></li>
            <li><a href="permission-management.html" title="Permission Management">Permission Management</a></li>
            <li><a href="error-handling.html" title="Error-Handling">Error-Handling</a></li>
            <li><a href="command-line-api.html" title="Command-line API">Command-line API</a></li>
            <li><a href="java-api.html" title="Java API">Java API</a></li>
            <li><a href="maven-api.html" title="Maven plugin API">Maven plugin API</a></li>
            <li><a href="gradle-api.html" title="Gradle API">Gradle API</a></li>
            <li><a href="faq.html" title="FAQs">FAQs</a></li>
        </ul>
      </li>
        <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Advanced Topics <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="db-project-best-practices.html" title="DB Project Best Practices">DB Project Best Practices</a></li>
            <li><a href="rollback.html" title="Rollback">Rollback</a></li>
            <li><a href="multiple-schema-management.html" title="Multiple Schema Management">Multiple Schema Management</a></li>
            <li><a href="in-memory-db-testing.html" title="In-memory DB Testing">In-memory DB Testing</a></li>
            <li><a href="parallel-deploy-execution.html" title="Parallel Deploy Execution">Parallel Deploy Execution</a></li>
            <li><a href="orm-integration.html" title="ORM Integration">ORM Integration</a></li>
            <li><a href="baseline-validation.html" title="Baseline DDL Validation">Baseline DDL Validation</a></li>
            <li><a href="sybase-ase-notes.html" title="Sybase ASE Notes">Sybase ASE Notes</a></li>
            <li><a href="db2-notes.html" title="DB2 Notes">DB2 Notes</a></li>
            <li><a href="phased-deployments.html" title="Phased Deployments">Phased Deployments</a></li>
            <li><a href="incremental-change-code-cleanup.html" title="Incremental Change Code Cleanup">Incremental Change Code Cleanup</a></li>
        </ul>
      </li>
        <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Onboarding Guide <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="onboarding-guide.html" title="Which onboarding to choose?">Which onboarding to choose?</a></li>
            <li><a href="new-onboarding-guide.html" title="New Systems">New Systems</a></li>
            <li><a href="existing-onboarding-guide.html" title="Existing Systems">Existing Systems</a></li>
            <li><a href="existing-diverging-onboarding-guide.html" title="Existing Systems with Diverging Shards">Existing Systems with Diverging Shards</a></li>
            <li><a href="legacy-onboarding-guide.html" title="Legacy Onboarding - Legacy Systems">Legacy Onboarding - Legacy Systems</a></li>
            <li><a href="db-merge-tool.html" title="DB Merge Tool">DB Merge Tool</a></li>
        </ul>
      </li>
        <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Developer Information <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li class="dropdown-submenu">
<a href="developer-guide.html" title="Developer Guide">Developer Guide</a>
              <ul class="dropdown-menu">
                  <li><a href="dev-setup-amazon.html" title="Amazon RDS DB Setup">Amazon RDS DB Setup</a></li>
                  <li><a href="dev-setup-db2.html" title="DB2 Test DB Setup">DB2 Test DB Setup</a></li>
                  <li><a href="dev-setup-sybase-ase.html" title="Sybase ASE Test DB Setup">Sybase ASE Test DB Setup</a></li>
              </ul>
            </li>
            <li><a href="design-walkthrough.html" title="Design Walkthrough">Design Walkthrough</a></li>
        </ul>
      </li>
              </ul>
            </div>
        </div>
      </div>
    </div>
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><a href="./" id="bannerLeft"><h2>Obevo</h2>
</a></div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li class=""><a href="./" title="Obevo">Obevo</a><span class="divider">/</span></li>
    <li class="active ">DB Project Best Practices</li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2017-11-15</li>
          <li id="projectVersion" class="pull-right">Version: 6.3.0</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
<ul class="nav nav-list">
          <li class="nav-header">Getting Started</li>
    <li><a href="index.html" title="Intro"><span class="none"></span>Intro</a>  </li>
    <li><a href="overview.html" title="Overview"><span class="none"></span>Overview</a>  </li>
    <li><a href="setup.html" title="Setup"><span class="none"></span>Setup</a>  </li>
    <li><a href="support.html" title="Help and Support"><span class="none"></span>Help and Support</a>  </li>
          <li class="nav-header">Technical Documentation</li>
    <li><a href="db-project-structure.html" title="DB Project Structure"><span class="none"></span>DB Project Structure</a>  </li>
    <li><a href="environment-management.html" title="Environment Management"><span class="none"></span>Environment Management</a>  </li>
    <li><a href="permission-management.html" title="Permission Management"><span class="none"></span>Permission Management</a>  </li>
    <li><a href="error-handling.html" title="Error-Handling"><span class="none"></span>Error-Handling</a>  </li>
    <li><a href="command-line-api.html" title="Command-line API"><span class="none"></span>Command-line API</a>  </li>
    <li><a href="java-api.html" title="Java API"><span class="none"></span>Java API</a>  </li>
    <li><a href="maven-api.html" title="Maven plugin API"><span class="none"></span>Maven plugin API</a>  </li>
    <li><a href="gradle-api.html" title="Gradle API"><span class="none"></span>Gradle API</a>  </li>
    <li><a href="faq.html" title="FAQs"><span class="none"></span>FAQs</a>  </li>
          <li class="nav-header">Advanced Topics</li>
    <li class="active"><a href="#"><span class="none"></span>DB Project Best Practices</a>
  </li>
    <li><a href="rollback.html" title="Rollback"><span class="none"></span>Rollback</a>  </li>
    <li><a href="multiple-schema-management.html" title="Multiple Schema Management"><span class="none"></span>Multiple Schema Management</a>  </li>
    <li><a href="in-memory-db-testing.html" title="In-memory DB Testing"><span class="none"></span>In-memory DB Testing</a>  </li>
    <li><a href="parallel-deploy-execution.html" title="Parallel Deploy Execution"><span class="none"></span>Parallel Deploy Execution</a>  </li>
    <li><a href="orm-integration.html" title="ORM Integration"><span class="none"></span>ORM Integration</a>  </li>
    <li><a href="baseline-validation.html" title="Baseline DDL Validation"><span class="none"></span>Baseline DDL Validation</a>  </li>
    <li><a href="sybase-ase-notes.html" title="Sybase ASE Notes"><span class="none"></span>Sybase ASE Notes</a>  </li>
    <li><a href="db2-notes.html" title="DB2 Notes"><span class="none"></span>DB2 Notes</a>  </li>
    <li><a href="phased-deployments.html" title="Phased Deployments"><span class="none"></span>Phased Deployments</a>  </li>
    <li><a href="incremental-change-code-cleanup.html" title="Incremental Change Code Cleanup"><span class="none"></span>Incremental Change Code Cleanup</a>  </li>
          <li class="nav-header">Onboarding Guide</li>
    <li><a href="onboarding-guide.html" title="Which onboarding to choose?"><span class="none"></span>Which onboarding to choose?</a>  </li>
    <li><a href="new-onboarding-guide.html" title="New Systems"><span class="none"></span>New Systems</a>  </li>
    <li><a href="existing-onboarding-guide.html" title="Existing Systems"><span class="none"></span>Existing Systems</a>  </li>
    <li><a href="existing-diverging-onboarding-guide.html" title="Existing Systems with Diverging Shards"><span class="none"></span>Existing Systems with Diverging Shards</a>  </li>
    <li><a href="legacy-onboarding-guide.html" title="Legacy Onboarding - Legacy Systems"><span class="none"></span>Legacy Onboarding - Legacy Systems</a>  </li>
    <li><a href="db-merge-tool.html" title="DB Merge Tool"><span class="none"></span>DB Merge Tool</a>  </li>
          <li class="nav-header">Developer Information</li>
    <li><a href="developer-guide.html" title="Developer Guide"><span class="icon-chevron-down"></span>Developer Guide</a>
      <ul class="nav nav-list">
    <li><a href="dev-setup-amazon.html" title="Amazon RDS DB Setup"><span class="none"></span>Amazon RDS DB Setup</a>  </li>
    <li><a href="dev-setup-db2.html" title="DB2 Test DB Setup"><span class="none"></span>DB2 Test DB Setup</a>  </li>
    <li><a href="dev-setup-sybase-ase.html" title="Sybase ASE Test DB Setup"><span class="none"></span>Sybase ASE Test DB Setup</a>  </li>
      </ul>
  </li>
    <li><a href="design-walkthrough.html" title="Design Walkthrough"><span class="none"></span>Design Walkthrough</a>  </li>
  </ul>
          <hr />
          <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
  <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
              </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >

    
        <div class="section">
<h2><a name="DB_Project_Best_Practices"></a>DB Project Best Practices</h2>
            
                
                
            
<ul>
<li><a href="#Logical_schema_name_should_match_production_or_otherwise_be_environment-agnostic">Logical schema name should match production or otherwise be environment-agnostic</a></li>
<li><a href="#Table__CHANGEs_should_be_as_fine-grained_as_reasonable_to_ease_recoverability">Table //// CHANGEs should be as fine-grained as reasonable to ease recoverability</a></li>
<li><a href="#Set_up_a_dedicated_test_schema_to_run_a_deploy_against_in_your_continuous_builds">Set up a dedicated test schema to run a deploy against in your continuous builds</a></li>
<li><a href="#Do_not_include_references_to_the_same_schema_in_your_DDLs">Do not include references to the same schema in your DDLs</a></li>
<li><a href="#Tokenize_references_to_other_schemas_in_your_objects">Tokenize references to other schemas in your objects</a></li>
<li><a href="#Consider_leveraging_the_in-memory_DB_translation_feature_for_unit_testing_your_DB_access_code">Consider leveraging the in-memory DB translation feature for unit testing your DB access code</a></li></ul>

            
<div class="section">
<h3><a name="Logical_schema_name_should_match_production_or_otherwise_be_environment-agnostic"></a>Logical schema name should match production or otherwise be environment-agnostic</h3>

            
<p>The logical schema name should be representative of your schema across environments. When onboarding an
                existing schema, this typically means to match it to production (though not always)
            </p>

            
<p>In observing some teams onboarding, we see a habit of naming the logical schema in the &lt;schemas&gt;
                section in the system-config.xml file as the name of the dev schema that is being deployed to. This is not
                correct - it is preferred to match it to prod, and then to leverage the dbSchemaPrefix/Suffix or
                schemaOverrides to map it to the dev schema.
            </p>

            
<p>We will improve the reverse-engineering support in the future to also generate a template system-config.xml
                file for you as to avoid confusion on this in the future.
            </p>

            </div>
<div class="section">
<h3><a name="Table__CHANGEs_should_be_as_fine-grained_as_reasonable_to_ease_recoverability"></a>Table //// CHANGEs should be as fine-grained as reasonable to ease recoverability</h3>

            
<p>See the &quot;Transactionality Considerations&quot; section in the
                <a href="error-handling.html">Error Handling page</a>
                for
                details
            </p>


            </div>
<div class="section">
<h3><a name="Set_up_a_dedicated_test_schema_to_run_a_deploy_against_in_your_continuous_builds"></a>Set up a dedicated test schema to run a deploy against in your continuous builds</h3>

            
<p>If you commit code, you should have automated tests for it; that applies not just to your application code,
                but to your database code.
            </p>

            
<p>At minimum, you should be able to validate the correctness of the SQL you deployed. The best way to do this
                is to simply deploy your schema to an environment! This requires an actual environment to test against, esp.
                for DBMS platforms whose specific SQL dialects and storage settings cannot be tested against an in-memory double.
            </p>


            </div>
<div class="section">
<h3><a name="Do_not_include_references_to_the_same_schema_in_your_DDLs"></a>Do not include references to the same schema in your DDLs</h3>

            
<p>e.g. If your objects are for schmea MYSCHEMA1, then do not qualify your object references with the schema, e.g.
                </p>
<div class="source"><pre class="prettyprint">CREATE TABLE MYSCHEMA1.TAB1 (  -- Not OK

CREATE TABLE TAB1 (  -- OK</pre></div>
            

            
<p>This is so that you have flexibility in deploying your objects to differently named schemas (whether suffixed
                differently like MYSCHEMA1_QA or to reuse objects in other projects)
            </p>

            
<p>The reverse-engineering steps should already take care of removing the object qualifiers from the same schema.
                But if somehow the qualifiers are not removed, then please do so manually.
            </p>

            </div>
<div class="section">
<h3><a name="Tokenize_references_to_other_schemas_in_your_objects"></a>Tokenize references to other schemas in your objects</h3>

            
<p>Take a view defined in MYSCHEMA1 that refers to another schema OTHERSCHEMA1, like so:</p>

            
<div class="source"><pre class="prettyprint">CREATE VIEW MYVIEW1 AS SELECT * FROM OTHERSCHEMA1.OTHER_TABLE</pre></div>

            
<p>Per the point above, we'd like to have flexibility in the schema to deploy to.</p>

            
<p>You can define tokens yourself (see the<a href="environment-management.html">tokenization doc</a>), or you
                can use the built-in tokens for the physical schema name. For example, assuming you've defined the logical schema
                name as THATSCHEMA in your system-config.xml that maps to the OTHERSCHEMA1 physical schema, use the token as
                below (&lt;logicalSchema&gt;_physicalSchema)
            </p>

            
<div class="source"><pre class="prettyprint">CREATE VIEW MYVIEW1 AS SELECT * FROM ${THATSCHEMA_physicalName}.OTHER_TABLE</pre></div>

            </div>
<div class="section">
<h3><a name="Consider_leveraging_the_in-memory_DB_translation_feature_for_unit_testing_your_DB_access_code"></a>Consider leveraging the in-memory DB translation feature for unit testing your DB access code</h3>

            
<p>While unit test databases cannot test the exact SQL syntax that you define, they can prove useful for testing
                your application code that needs to access the DB, e.g. your ORM layer or your data-access code. Hopefully your
                code is agnostic to the underlying DBMS technology, esp. if you are using an ORM or ANSI SQL.
            </p>

            
<p>To help create an in-memory DB from your DDLs without having to resort to a separate copy just for the
                in-memory DB, try out the<a href="in-memory-db-testing.html">in-memory DB conversion feature</a>.
            </p>

            
<ul>
                
<li>e.g. if you use Hibernate's schema generation from the POJOs, it would be a better idea to move to
                    Obevo's instead
                </li>
            </ul>
        </div></div>
    

        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2017
<a href="http://www.goldmansachs.com/">Goldman Sachs</a>.
All rights reserved.</p>
        </div>
        </div>
    </footer>
    </body>
</html>
